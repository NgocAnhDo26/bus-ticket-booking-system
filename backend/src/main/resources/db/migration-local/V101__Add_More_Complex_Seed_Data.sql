-- =====================================================
-- COMPLEX SEED DATA FOR DEMO SCENARIOS
-- Version: V101
-- Focus: HCM - Da Nang Route (Day 7)
-- =====================================================

-- 1. NEW OPERATORS
INSERT INTO operators (id, name, contact_info, is_active, created_at) VALUES
    ('10000000-0000-0000-0000-000000000004', 'Thuận Thảo', '{"phone": "+842835112957", "email": "info@thuanthao.vn", "website": "thuanthao.vn"}', true, NOW()),
    ('10000000-0000-0000-0000-000000000005', 'Tân Đạt', '{"phone": "+842822400500", "email": "ticket@tandat.vn", "website": "tandat.vn"}', true, NOW()),
    ('10000000-0000-0000-0000-000000000006', 'Mai Linh Express', '{"phone": "+842839292929", "email": "express@mailinh.vn", "website": "mailinh.vn"}', true, NOW())
ON CONFLICT (id) DO NOTHING;

-- 2. NEW BUS STRUCTURES (LAYOUTS)
INSERT INTO bus_layouts (id, name, bus_type, total_seats, total_floors, total_rows, total_cols, description, created_at) VALUES
    ('30000000-0000-0000-0000-000000000005', 'Phòng nằm 22 cabin (Cung điện)', 'SLEEPER', 22, 2, 6, 2, 'Xe phòng nằm riêng biệt cao cấp', NOW()),
    ('30000000-0000-0000-0000-000000000006', 'Giường nằm 44 chỗ', 'SLEEPER', 44, 2, 11, 4, 'Xe giường nằm phổ thông rộng rãi', NOW())
ON CONFLICT (id) DO NOTHING;

-- Layout Seats for 22 Cabin (2 floors, 6 rows, 2 cols - separate cabins)
INSERT INTO layout_seats (id, layout_id, seat_code, seat_type, floor_number, row_index, col_index, is_active) VALUES
    -- Floor 1
    ('35000000-0000-0000-0000-000000000001', '30000000-0000-0000-0000-000000000005', 'A01', 'VIP', 1, 1, 1, true),
    ('35000000-0000-0000-0000-000000000002', '30000000-0000-0000-0000-000000000005', 'A02', 'VIP', 1, 1, 2, true),
    ('35000000-0000-0000-0000-000000000003', '30000000-0000-0000-0000-000000000005', 'A03', 'VIP', 1, 2, 1, true),
    ('35000000-0000-0000-0000-000000000004', '30000000-0000-0000-0000-000000000005', 'A04', 'VIP', 1, 2, 2, true),
    ('35000000-0000-0000-0000-000000000005', '30000000-0000-0000-0000-000000000005', 'A05', 'VIP', 1, 3, 1, true),
    ('35000000-0000-0000-0000-000000000006', '30000000-0000-0000-0000-000000000005', 'A06', 'VIP', 1, 3, 2, true),
    ('35000000-0000-0000-0000-000000000007', '30000000-0000-0000-0000-000000000005', 'A07', 'VIP', 1, 4, 1, true),
    ('35000000-0000-0000-0000-000000000008', '30000000-0000-0000-0000-000000000005', 'A08', 'VIP', 1, 4, 2, true),
    ('35000000-0000-0000-0000-000000000009', '30000000-0000-0000-0000-000000000005', 'A09', 'VIP', 1, 5, 1, true),
    ('35000000-0000-0000-0000-000000000010', '30000000-0000-0000-0000-000000000005', 'A10', 'VIP', 1, 5, 2, true),
    ('35000000-0000-0000-0000-000000000011', '30000000-0000-0000-0000-000000000005', 'A11', 'VIP', 1, 6, 1, true), -- Driver seat area reserved usually but adding for completion
    -- Floor 2
    ('35000000-0000-0000-0000-000000000012', '30000000-0000-0000-0000-000000000005', 'B01', 'VIP', 2, 1, 1, true),
    ('35000000-0000-0000-0000-000000000013', '30000000-0000-0000-0000-000000000005', 'B02', 'VIP', 2, 1, 2, true),
    ('35000000-0000-0000-0000-000000000014', '30000000-0000-0000-0000-000000000005', 'B03', 'VIP', 2, 2, 1, true),
    ('35000000-0000-0000-0000-000000000015', '30000000-0000-0000-0000-000000000005', 'B04', 'VIP', 2, 2, 2, true),
    ('35000000-0000-0000-0000-000000000016', '30000000-0000-0000-0000-000000000005', 'B05', 'VIP', 2, 3, 1, true),
    ('35000000-0000-0000-0000-000000000017', '30000000-0000-0000-0000-000000000005', 'B06', 'VIP', 2, 3, 2, true),
    ('35000000-0000-0000-0000-000000000018', '30000000-0000-0000-0000-000000000005', 'B07', 'VIP', 2, 4, 1, true),
    ('35000000-0000-0000-0000-000000000019', '30000000-0000-0000-0000-000000000005', 'B08', 'VIP', 2, 4, 2, true),
    ('35000000-0000-0000-0000-000000000020', '30000000-0000-0000-0000-000000000005', 'B09', 'VIP', 2, 5, 1, true),
    ('35000000-0000-0000-0000-000000000021', '30000000-0000-0000-0000-000000000005', 'B10', 'VIP', 2, 5, 2, true),
    ('35000000-0000-0000-0000-000000000022', '30000000-0000-0000-0000-000000000005', 'B11', 'VIP', 2, 6, 1, true)
ON CONFLICT (id) DO NOTHING;

-- Layout Seats for 44 Bed (Simplified - partial)
INSERT INTO layout_seats (id, layout_id, seat_code, seat_type, floor_number, row_index, col_index, is_active) VALUES
    ('36000000-0000-0000-0000-000000000001', '30000000-0000-0000-0000-000000000006', 'A01', 'NORMAL', 1, 1, 1, true),
    ('36000000-0000-0000-0000-000000000002', '30000000-0000-0000-0000-000000000006', 'A02', 'NORMAL', 1, 1, 2, true),
    ('36000000-0000-0000-0000-000000000003', '30000000-0000-0000-0000-000000000006', 'A03', 'NORMAL', 1, 1, 3, true)
ON CONFLICT (id) DO NOTHING;


-- 3. NEW BUSES
INSERT INTO buses (id, operator_id, bus_layout_id, plate_number, amenities, is_active, created_at) VALUES
    ('40000000-0000-0000-0000-000000000010', '10000000-0000-0000-0000-000000000004', '30000000-0000-0000-0000-000000000001', '78B-00123', '{"wifi": true, "usb": true, "water": true}', true, NOW()), -- Thuận Thảo - Giường nằm
    ('40000000-0000-0000-0000-000000000011', '10000000-0000-0000-0000-000000000004', '30000000-0000-0000-0000-000000000005', '78B-00456', '{"wifi": true, "usb": true, "wc": true, "tv": true}', true, NOW()), -- Thuận Thảo - Cung điện
    ('40000000-0000-0000-0000-000000000012', '10000000-0000-0000-0000-000000000005', '30000000-0000-0000-0000-000000000002', '51B-88888', '{"wifi": true}', true, NOW()), -- Tân Đạt - VIP 34
    ('40000000-0000-0000-0000-000000000013', '10000000-0000-0000-0000-000000000006', '30000000-0000-0000-0000-000000000004', '51B-99999', '{"ac": true}', true, NOW()) -- Mai Linh - Ghế ngồi
ON CONFLICT (id) DO NOTHING;

-- 4. TRIPS FOR HCM - DA NANG (Day 7, 2026-01-07)
-- Route ID for HCM-DN: 50000000-0000-0000-0000-000000000003
INSERT INTO trips (id, route_id, bus_id, departure_time, arrival_time, status, created_at) VALUES
    -- Trip A: Sang som
    ('60000000-0000-0000-0000-000000010001', '50000000-0000-0000-0000-000000000003', '40000000-0000-0000-0000-000000000010', '2026-01-07 05:00:00', '2026-01-07 22:00:00', 'SCHEDULED', NOW()),
    -- Trip B: Sang
    ('60000000-0000-0000-0000-000000010002', '50000000-0000-0000-0000-000000000003', '40000000-0000-0000-0000-000000000011', '2026-01-07 08:30:00', '2026-01-08 01:30:00', 'SCHEDULED', NOW()),
    -- Trip C: Trua
    ('60000000-0000-0000-0000-000000010003', '50000000-0000-0000-0000-000000000003', '40000000-0000-0000-0000-000000000012', '2026-01-07 11:00:00', '2026-01-08 04:00:00', 'SCHEDULED', NOW()),
    -- Trip D: Chieu
    ('60000000-0000-0000-0000-000000010004', '50000000-0000-0000-0000-000000000003', '40000000-0000-0000-0000-000000000013', '2026-01-07 14:00:00', '2026-01-08 07:00:00', 'SCHEDULED', NOW()),
    -- Trip E: Toi
    ('60000000-0000-0000-0000-000000010005', '50000000-0000-0000-0000-000000000003', '40000000-0000-0000-0000-000000000010', '2026-01-07 17:00:00', '2026-01-08 10:00:00', 'SCHEDULED', NOW()),
    -- Trip F: Khuya
    ('60000000-0000-0000-0000-000000010006', '50000000-0000-0000-0000-000000000003', '40000000-0000-0000-0000-000000000011', '2026-01-07 20:00:00', '2026-01-08 13:00:00', 'SCHEDULED', NOW()),
    -- Trip G: Khuya muon
    ('60000000-0000-0000-0000-000000010007', '50000000-0000-0000-0000-000000000003', '40000000-0000-0000-0000-000000000012', '2026-01-07 22:30:00', '2026-01-08 15:30:00', 'SCHEDULED', NOW())
ON CONFLICT (id) DO NOTHING;

-- 5. TRIP PRICING
INSERT INTO trip_pricing (id, trip_id, seat_type, price) VALUES
    -- Trip A (Sleeper 40 - Bus10)
    ('61000000-0000-0000-0000-000000010001', '60000000-0000-0000-0000-000000010001', 'NORMAL', 450000),
    ('61000000-0000-0000-0000-000000010002', '60000000-0000-0000-0000-000000010001', 'VIP', 650000),
    -- Trip B (Cabin - Bus11)
    ('61000000-0000-0000-0000-000000010003', '60000000-0000-0000-0000-000000010002', 'VIP', 950000),
    -- Trip C (VIP 34 - Bus12)
    ('61000000-0000-0000-0000-000000010004', '60000000-0000-0000-0000-000000010003', 'VIP', 750000),
    -- Trip D (Chair - Bus13)
    ('61000000-0000-0000-0000-000000010005', '60000000-0000-0000-0000-000000010004', 'NORMAL', 350000),
    -- Trip E (Sleeper 40 - Bus10)
    ('61000000-0000-0000-0000-000000010006', '60000000-0000-0000-0000-000000010005', 'NORMAL', 480000),
    ('61000000-0000-0000-0000-000000010007', '60000000-0000-0000-0000-000000010005', 'VIP', 680000),
    -- Trip F (Cabin - Bus11)
    ('61000000-0000-0000-0000-000000010008', '60000000-0000-0000-0000-000000010006', 'VIP', 1050000),
    -- Trip G (VIP 34 - Bus12)
    ('61000000-0000-0000-0000-000000010009', '60000000-0000-0000-0000-000000010007', 'VIP', 800000)
ON CONFLICT (id) DO NOTHING;

-- 6. TRIP STOPS (Reusing stations: HCM-20..04, DN-20..03, NhaTrang-20..07, Hue-20..06, QuyNhon-Missing use Hue for demo or create new)
-- Creating new intermediate station Quy Nhon
INSERT INTO stations (id, name, city, address, created_at) VALUES
    ('20000000-0000-0000-0000-000000000011', 'Bến xe Quy Nhơn', 'Quy Nhơn', '71 Tây Sơn, Ghềnh Ráng, Quy Nhơn', NOW())
ON CONFLICT (id) DO NOTHING;

INSERT INTO trip_stops (id, trip_id, station_id, stop_order, duration_minutes_from_origin, stop_type) VALUES
    -- Trip A stops
    ('62000000-0000-0000-0000-000000010001', '60000000-0000-0000-0000-000000010001', '20000000-0000-0000-0000-000000000004', 1, 0, 'PICKUP'), -- HCM
    ('62000000-0000-0000-0000-000000010002', '60000000-0000-0000-0000-000000010001', '20000000-0000-0000-0000-000000000007', 2, 480, 'BOTH'), -- Nha Trang (8h)
    ('62000000-0000-0000-0000-000000010003', '60000000-0000-0000-0000-000000010001', '20000000-0000-0000-0000-000000000011', 3, 720, 'BOTH'), -- Quy Nhon (12h)
    ('62000000-0000-0000-0000-000000000014', '60000000-0000-0000-0000-000000010001', '20000000-0000-0000-0000-000000000003', 4, 1020, 'DROPOFF'), -- Da Nang (17h)
    
    -- Trip B stops
    ('62000000-0000-0000-0000-000000010005', '60000000-0000-0000-0000-000000010002', '20000000-0000-0000-0000-000000000004', 1, 0, 'PICKUP'),
    ('62000000-0000-0000-0000-000000010006', '60000000-0000-0000-0000-000000010002', '20000000-0000-0000-0000-000000000003', 2, 1020, 'DROPOFF')
ON CONFLICT (id) DO NOTHING;

